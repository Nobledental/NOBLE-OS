/**
 * Phase 27: iOS Bento Polish
 * 
 * Premium visual effects - Frosted glass, Apple Mesh, and optimized interactions
 */

/* =============================================================================
   FROSTED GLASS EFFECTS (Glassmorphism)
   ============================================================================= */

/* Light Frosted Glass */
.glass-card {
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    box-shadow:
        0 4px 6px -1px rgba(0, 0, 0, 0.05),
        0 2px 4px -1px rgba(0, 0, 0, 0.03),
        inset 0 1px 0 0 rgba(255, 255, 255, 0.6);
}

.dark .glass-card {
    background: rgba(30, 41, 59, 0.7);
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow:
        0 4px 6px -1px rgba(0, 0, 0, 0.2),
        0 2px 4px -1px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 0 rgba(255, 255, 255, 0.05);
}

/* Heavy Frosted Glass */
.glass-card-heavy {
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(40px) saturate(180%);
    -webkit-backdrop-filter: blur(40px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.4);
    box-shadow:
        0 8px 32px rgba(0, 0, 0, 0.08),
        0 4px 12px rgba(0, 0, 0, 0.04),
        inset 0 1px 0 0 rgba(255, 255, 255, 0.8);
}

.dark .glass-card-heavy {
    background: rgba(30, 41, 59, 0.85);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow:
        0 8px 32px rgba(0, 0, 0, 0.3),
        0 4px 12px rgba(0, 0, 0, 0.2),
        inset 0 1px 0 0 rgba(255, 255, 255, 0.08);
}

/* Ultra Light Glass */
.glass-card-light {
    background: rgba(255, 255, 255, 0.4);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.dark .glass-card-light {
    background: rgba(30, 41, 59, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.05);
}

/* =============================================================================
   APPLE MESH GRADIENT BACKGROUNDS
   ============================================================================= */

/* Primary Mesh - Blue/Purple */
.apple-mesh-primary {
    background:
        radial-gradient(ellipse at 0% 0%, rgba(99, 102, 241, 0.3) 0%, transparent 50%),
        radial-gradient(ellipse at 100% 0%, rgba(168, 85, 247, 0.25) 0%, transparent 50%),
        radial-gradient(ellipse at 100% 100%, rgba(236, 72, 153, 0.2) 0%, transparent 50%),
        radial-gradient(ellipse at 0% 100%, rgba(59, 130, 246, 0.25) 0%, transparent 50%),
        linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%);
}

.dark .apple-mesh-primary {
    background:
        radial-gradient(ellipse at 0% 0%, rgba(99, 102, 241, 0.2) 0%, transparent 50%),
        radial-gradient(ellipse at 100% 0%, rgba(168, 85, 247, 0.15) 0%, transparent 50%),
        radial-gradient(ellipse at 100% 100%, rgba(236, 72, 153, 0.1) 0%, transparent 50%),
        radial-gradient(ellipse at 0% 100%, rgba(59, 130, 246, 0.15) 0%, transparent 50%),
        linear-gradient(180deg, #0f172a 0%, #1e293b 100%);
}

/* Medical Mesh - Teal/Cyan */
.apple-mesh-medical {
    background:
        radial-gradient(ellipse at 0% 0%, rgba(20, 184, 166, 0.25) 0%, transparent 50%),
        radial-gradient(ellipse at 100% 0%, rgba(34, 211, 238, 0.2) 0%, transparent 50%),
        radial-gradient(ellipse at 100% 100%, rgba(59, 130, 246, 0.15) 0%, transparent 50%),
        radial-gradient(ellipse at 0% 100%, rgba(16, 185, 129, 0.2) 0%, transparent 50%),
        linear-gradient(180deg, #f0fdfa 0%, #ecfeff 100%);
}

.dark .apple-mesh-medical {
    background:
        radial-gradient(ellipse at 0% 0%, rgba(20, 184, 166, 0.15) 0%, transparent 50%),
        radial-gradient(ellipse at 100% 0%, rgba(34, 211, 238, 0.1) 0%, transparent 50%),
        radial-gradient(ellipse at 100% 100%, rgba(59, 130, 246, 0.08) 0%, transparent 50%),
        radial-gradient(ellipse at 0% 100%, rgba(16, 185, 129, 0.12) 0%, transparent 50%),
        linear-gradient(180deg, #042f2e 0%, #0f172a 100%);
}

/* Warm Mesh - Orange/Pink */
.apple-mesh-warm {
    background:
        radial-gradient(ellipse at 0% 0%, rgba(251, 146, 60, 0.2) 0%, transparent 50%),
        radial-gradient(ellipse at 100% 0%, rgba(244, 114, 182, 0.25) 0%, transparent 50%),
        radial-gradient(ellipse at 100% 100%, rgba(251, 113, 133, 0.2) 0%, transparent 50%),
        radial-gradient(ellipse at 0% 100%, rgba(245, 158, 11, 0.15) 0%, transparent 50%),
        linear-gradient(180deg, #fffbeb 0%, #fff1f2 100%);
}

.dark .apple-mesh-warm {
    background:
        radial-gradient(ellipse at 0% 0%, rgba(251, 146, 60, 0.12) 0%, transparent 50%),
        radial-gradient(ellipse at 100% 0%, rgba(244, 114, 182, 0.15) 0%, transparent 50%),
        radial-gradient(ellipse at 100% 100%, rgba(251, 113, 133, 0.1) 0%, transparent 50%),
        radial-gradient(ellipse at 0% 100%, rgba(245, 158, 11, 0.08) 0%, transparent 50%),
        linear-gradient(180deg, #1c1917 0%, #0f172a 100%);
}

/* Animated Mesh */
.apple-mesh-animated {
    background:
        radial-gradient(ellipse at var(--mesh-x1, 0%) var(--mesh-y1, 0%), rgba(99, 102, 241, 0.3) 0%, transparent 50%),
        radial-gradient(ellipse at var(--mesh-x2, 100%) var(--mesh-y2, 0%), rgba(168, 85, 247, 0.25) 0%, transparent 50%),
        radial-gradient(ellipse at var(--mesh-x3, 100%) var(--mesh-y3, 100%), rgba(236, 72, 153, 0.2) 0%, transparent 50%),
        radial-gradient(ellipse at var(--mesh-x4, 0%) var(--mesh-y4, 100%), rgba(59, 130, 246, 0.25) 0%, transparent 50%),
        linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%);
    animation: meshFloat 20s ease-in-out infinite;
}

@keyframes meshFloat {

    0%,
    100% {
        --mesh-x1: 0%;
        --mesh-y1: 0%;
        --mesh-x2: 100%;
        --mesh-y2: 0%;
        --mesh-x3: 100%;
        --mesh-y3: 100%;
        --mesh-x4: 0%;
        --mesh-y4: 100%;
    }

    25% {
        --mesh-x1: 10%;
        --mesh-y1: 5%;
        --mesh-x2: 90%;
        --mesh-y2: 10%;
        --mesh-x3: 95%;
        --mesh-y3: 90%;
        --mesh-x4: 5%;
        --mesh-y4: 95%;
    }

    50% {
        --mesh-x1: 5%;
        --mesh-y1: 10%;
        --mesh-x2: 95%;
        --mesh-y2: 5%;
        --mesh-x3: 90%;
        --mesh-y3: 95%;
        --mesh-x4: 10%;
        --mesh-y4: 90%;
    }

    75% {
        --mesh-x1: 8%;
        --mesh-y1: 3%;
        --mesh-x2: 92%;
        --mesh-y2: 8%;
        --mesh-x3: 97%;
        --mesh-y3: 92%;
        --mesh-x4: 3%;
        --mesh-y4: 97%;
    }
}

/* =============================================================================
   BENTO GRID LAYOUT
   ============================================================================= */

.bento-grid {
    display: grid;
    gap: 1rem;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
}

.bento-grid-large {
    display: grid;
    gap: 1.5rem;
    grid-template-columns: repeat(12, 1fr);
    grid-auto-rows: minmax(120px, auto);
}

.bento-item {
    border-radius: 1.5rem;
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.bento-item:hover {
    transform: translateY(-2px);
    box-shadow:
        0 20px 25px -5px rgba(0, 0, 0, 0.1),
        0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

/* Bento sizes */
.bento-sm {
    grid-column: span 3;
    grid-row: span 1;
}

.bento-md {
    grid-column: span 4;
    grid-row: span 2;
}

.bento-lg {
    grid-column: span 6;
    grid-row: span 2;
}

.bento-xl {
    grid-column: span 8;
    grid-row: span 3;
}

.bento-full {
    grid-column: span 12;
    grid-row: span 2;
}

@media (max-width: 1024px) {
    .bento-sm {
        grid-column: span 6;
    }

    .bento-md {
        grid-column: span 6;
    }

    .bento-lg {
        grid-column: span 12;
    }

    .bento-xl {
        grid-column: span 12;
    }
}

@media (max-width: 640px) {

    .bento-sm,
    .bento-md,
    .bento-lg,
    .bento-xl,
    .bento-full {
        grid-column: span 12;
    }
}

/* =============================================================================
   TOUCH-OPTIMIZED 3D MAP INTERACTIONS
   ============================================================================= */

/* Touch targets */
.touch-target {
    min-width: 44px;
    min-height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.touch-target-lg {
    min-width: 56px;
    min-height: 56px;
}

/* Tooth in 3D map - larger for touch */
.tooth-touch-area {
    padding: 8px;
    margin: -8px;
    cursor: pointer;
    touch-action: manipulation;
}

@media (hover: none) {
    .tooth-touch-area {
        padding: 12px;
        margin: -12px;
    }
}

/* Touch feedback */
.touch-feedback {
    transition: transform 0.1s ease, opacity 0.1s ease;
}

.touch-feedback:active {
    transform: scale(0.95);
    opacity: 0.8;
}

/* Pinch-to-zoom container */
.pinch-zoom-container {
    touch-action: pinch-zoom pan-x pan-y;
    overflow: hidden;
    position: relative;
}

/* Smooth scrolling */
.scroll-smooth {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
}

/* =============================================================================
   DESKTOP MOUSE OPTIMIZATIONS
   ============================================================================= */

@media (hover: hover) {

    /* Hover states for desktop */
    .hover-lift {
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .hover-lift:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 24px -8px rgba(0, 0, 0, 0.15);
    }

    /* Cursor pointer on interactive elements */
    .interactive {
        cursor: pointer;
    }

    /* Tooltip hover delay */
    .tooltip-delay {
        --tooltip-delay: 0.3s;
    }

    /* Subtle hover highlights */
    .hover-highlight {
        transition: background-color 0.15s ease;
    }

    .hover-highlight:hover {
        background-color: rgba(0, 0, 0, 0.03);
    }

    .dark .hover-highlight:hover {
        background-color: rgba(255, 255, 255, 0.03);
    }
}

/* =============================================================================
   PREMIUM MICRO-ANIMATIONS
   ============================================================================= */

/* Smooth fade in */
.fade-in {
    animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(8px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Pulse animation for alerts */
.pulse-soft {
    animation: pulseSoft 2s ease-in-out infinite;
}

@keyframes pulseSoft {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.7;
    }
}

/* Scale in */
.scale-in {
    animation: scaleIn 0.2s ease-out;
}

@keyframes scaleIn {
    from {
        transform: scale(0.95);
        opacity: 0;
    }

    to {
        transform: scale(1);
        opacity: 1;
    }
}

/* Slide in from right */
.slide-in-right {
    animation: slideInRight 0.3s ease-out;
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }

    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* Bounce in */
.bounce-in {
    animation: bounceIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

@keyframes bounceIn {
    from {
        transform: scale(0);
    }

    to {
        transform: scale(1);
    }
}

/* =============================================================================
   ACCESSIBILITY IMPROVEMENTS
   ============================================================================= */

/* Focus visible styles */
.focus-ring {
    outline: none;
}

.focus-ring:focus-visible {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 2px;
    border-radius: 4px;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* High contrast mode */
@media (prefers-contrast: high) {

    .glass-card,
    .glass-card-heavy,
    .glass-card-light {
        border-width: 2px;
    }
}

/* =============================================================================
   TYPOGRAPHY REFINEMENTS
   ============================================================================= */

.text-balance {
    text-wrap: balance;
}

.text-pretty {
    text-wrap: pretty;
}

/* Apple SF-style numbers */
.tabular-nums {
    font-variant-numeric: tabular-nums;
}

/* Proper kerning */
.tracking-tight {
    letter-spacing: -0.025em;
}

.tracking-tighter {
    letter-spacing: -0.05em;
}